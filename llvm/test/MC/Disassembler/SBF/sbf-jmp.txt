# RUN: llvm-mc --disassemble %s -triple=sbf-solana-solana \
# RUN:                          | FileCheck %s --check-prefix=CHECK-NEW
# RUN: llvm-mc --disassemble %s -triple=sbf-solana-solana \
# RUN:   --output-asm-variant=1 | FileCheck %s --check-prefix=CHECK-OLD

# TODO: Test immediate field ranges.

# TODO: Note that the negative immediates on the unsigned comparisons 
# below (e.g., jgt) should probably render as large unsigned values. For now,
# this is the same behavior as the old BPF back-end.


# CHECK-NEW: ja +8
# CHECK-OLD: goto +8
0x05,0x00,0x08,0x00,0x00,0x00,0x00,0x00

# CHECK-NEW: jeq r0, r9, +1
# CHECK-NEW: jne r0, r9, +1
# CHECK-NEW: jgt r0, r9, +1
# CHECK-NEW: jge r0, r9, +1
# CHECK-NEW: jlt r0, r9, +1
# CHECK-NEW: jle r0, r9, +1
# CHECK-NEW: jsgt r0, r9, +1
# CHECK-NEW: jsge r0, r9, +1
# CHECK-NEW: jslt r0, r9, +1
# CHECK-NEW: jsle r0, r9, +1
# CHECK-OLD: if r0 == r9 goto +1
# CHECK-OLD: if r0 != r9 goto +1
# CHECK-OLD: if r0 > r9 goto +1
# CHECK-OLD: if r0 >= r9 goto +1
# CHECK-OLD: if r0 < r9 goto +1
# CHECK-OLD: if r0 <= r9 goto +1
# CHECK-OLD: if r0 s> r9 goto +1
# CHECK-OLD: if r0 s>= r9 goto +1
# CHECK-OLD: if r0 s< r9 goto +1
# CHECK-OLD: if r0 s<= r9 goto +1
0x1d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x5d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x2d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x3d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0xad,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0xbd,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x6d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0x7d,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0xcd,0x90,0x01,0x00,0x00,0x00,0x00,0x00
0xdd,0x90,0x01,0x00,0x00,0x00,0x00,0x00

# CHECK-NEW: jeq r3, r2, +1
# CHECK-NEW: jne r3, r2, +1
# CHECK-NEW: jgt r3, r2, +1
# CHECK-NEW: jge r3, r2, +1
# CHECK-NEW: jlt r3, r2, +1
# CHECK-NEW: jle r3, r2, +1
# CHECK-NEW: jsgt r3, r2, +1
# CHECK-NEW: jsge r3, r2, +1
# CHECK-NEW: jslt r3, r2, +1
# CHECK-NEW: jsle r3, r2, +1
# CHECK-OLD: if r3 == r2 goto +1
# CHECK-OLD: if r3 != r2 goto +1
# CHECK-OLD: if r3 > r2 goto +1
# CHECK-OLD: if r3 >= r2 goto +1
# CHECK-OLD: if r3 < r2 goto +1
# CHECK-OLD: if r3 <= r2 goto +1
# CHECK-OLD: if r3 s> r2 goto +1
# CHECK-OLD: if r3 s>= r2 goto +1
# CHECK-OLD: if r3 s< r2 goto +1
# CHECK-OLD: if r3 s<= r2 goto +1
0x1d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x5d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x2d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x3d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0xad,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0xbd,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x6d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0x7d,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0xcd,0x23,0x01,0x00,0x00,0x00,0x00,0x00
0xdd,0x23,0x01,0x00,0x00,0x00,0x00,0x00

# CHECK-NEW: jeq r3, 123, +8
# CHECK-NEW: jne r3, 123, +8
# CHECK-NEW: jgt r3, 123, +8
# CHECK-NEW: jge r3, 123, +8
# CHECK-NEW: jlt r3, 123, +8
# CHECK-NEW: jle r3, 123, +8
# CHECK-NEW: jsgt r3, 123, +8
# CHECK-NEW: jsge r3, 123, +8
# CHECK-NEW: jslt r3, 123, +8
# CHECK-NEW: jsle r3, 123, +8
# CHECK-OLD: if r3 == 123 goto +8
# CHECK-OLD: if r3 != 123 goto +8
# CHECK-OLD: if r3 > 123 goto +8
# CHECK-OLD: if r3 >= 123 goto +8
# CHECK-OLD: if r3 < 123 goto +8
# CHECK-OLD: if r3 <= 123 goto +8
# CHECK-OLD: if r3 s> 123 goto +8
# CHECK-OLD: if r3 s>= 123 goto +8
# CHECK-OLD: if r3 s< 123 goto +8
# CHECK-OLD: if r3 s<= 123 goto +8
0x15,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x55,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x25,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x35,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0xa5,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0xb5,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x65,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0x75,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0xc5,0x03,0x08,0x00,0x7b,0x00,0x00,0x00
0xd5,0x03,0x08,0x00,0x7b,0x00,0x00,0x00

# CHECK-NEW: jeq r5, -123, +8 
# CHECK-NEW: jne r5, -123, +8 
# CHECK-NEW: jgt r5, -123, +8 
# CHECK-NEW: jge r5, -123, +8 
# CHECK-NEW: jlt r5, -123, +8 
# CHECK-NEW: jle r5, -123, +8 
# CHECK-NEW: jsgt r5, -123, +8 
# CHECK-NEW: jsge r5, -123, +8 
# CHECK-NEW: jslt r5, -123, +8 
# CHECK-NEW: jsle r5, -123, +8 
# CHECK-OLD: if r5 == -123 goto +8
# CHECK-OLD: if r5 != -123 goto +8
# CHECK-OLD: if r5 > -123 goto +8
# CHECK-OLD: if r5 >= -123 goto +8
# CHECK-OLD: if r5 < -123 goto +8
# CHECK-OLD: if r5 <= -123 goto +8
# CHECK-OLD: if r5 s> -123 goto +8
# CHECK-OLD: if r5 s>= -123 goto +8
# CHECK-OLD: if r5 s< -123 goto +8
# CHECK-OLD: if r5 s<= -123 goto +8
0x15,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x55,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x25,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x35,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xa5,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xb5,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x65,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x75,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xc5,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xd5,0x05,0x08,0x00,0x85,0xff,0xff,0xff

# CHECK-NEW: jeq w6, w2, +8
# CHECK-NEW: jne w6, w2, +8
# CHECK-NEW: jgt w6, w2, +8
# CHECK-NEW: jge w6, w2, +8
# CHECK-NEW: jlt w6, w2, +8
# CHECK-NEW: jle w6, w2, +8
# CHECK-NEW: jsgt w6, w2, +8
# CHECK-NEW: jsge w6, w2, +8
# CHECK-NEW: jslt w6, w2, +8
# CHECK-NEW: jsle w6, w2, +8
# CHECK-OLD: if w6 == w2 goto +8
# CHECK-OLD: if w6 != w2 goto +8
# CHECK-OLD: if w6 > w2 goto +8
# CHECK-OLD: if w6 >= w2 goto +8
# CHECK-OLD: if w6 < w2 goto +8
# CHECK-OLD: if w6 <= w2 goto +8
# CHECK-OLD: if w6 s> w2 goto +8
# CHECK-OLD: if w6 s>= w2 goto +8
# CHECK-OLD: if w6 s< w2 goto +8
# CHECK-OLD: if w6 s<= w2 goto +8
0x1e,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0x5e,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0x2e,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0x3e,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0xae,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0xbe,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0x6e,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0x7e,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0xce,0x26,0x08,0x00,0x00,0x00,0x00,0x00
0xde,0x26,0x08,0x00,0x00,0x00,0x00,0x00

# CHECK-NEW: jeq w5, -123, +8
# CHECK-NEW: jne w5, -123, +8
# CHECK-NEW: jgt w5, -123, +8
# CHECK-NEW: jge w5, -123, +8
# CHECK-NEW: jlt w5, -123, +8
# CHECK-NEW: jle w5, -123, +8
# CHECK-NEW: jsgt w5, -123, +8
# CHECK-NEW: jsge w5, -123, +8
# CHECK-NEW: jslt w5, -123, +8
# CHECK-NEW: jsle w5, -123, +8
# CHECK-OLD: if w5 == -123 goto +8
# CHECK-OLD: if w5 != -123 goto +8
# CHECK-OLD: if w5 s> -123 goto +8
# CHECK-OLD: if w5 s>= -123 goto +8
# CHECK-OLD: if w5 s< -123 goto +8
# CHECK-OLD: if w5 s<= -123 goto +8
0x16,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x56,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x26,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x36,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xa6,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xb6,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x66,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0x76,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xc6,0x05,0x08,0x00,0x85,0xff,0xff,0xff
0xd6,0x05,0x08,0x00,0x85,0xff,0xff,0xff


# CHECK-NEW: call 8
# CHECK-OLD: call 8
0x85,0x00,0x00,0x00,0x08,0x00,0x00,0x00

# CHECK-NEW: callx r4
# CHECK-OLD: callx r4
0x8d,0x00,0x00,0x00,0x04,0x00,0x00,0x00

# CHECK-NEW: exit
# CHECK-OLD: exit
0x95,0x00,0x00,0x00,0x00,0x00,0x00,0x00
